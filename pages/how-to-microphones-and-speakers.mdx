import MdxLayoutComponent from '../components/MdxLayoutComponent'

# Microphone Configuration
- Make sure that your microphone works as expected in other apps.
- Enable the microphones that you want to use in the settings.
- Enabled microphones can be assigned to players during song select.

## Delay
Configure the microphone delay such that the timing of the note recording matches your singing.
    - TIP: The delay value in Melody Mania is typically between 100ms and 300ms.
    - TIP: This option should be as low as possible.

The delay corresponds to the time

- from playing the audio in game
- to having the audio signal on the speaker and hearing it
    - TIP: prefer wired speakers to keep this latency small
- to having the sound of your voice on the mic
- to having the mic's audio signal reach the game and processing it

### Automatic Delay Configuration
Melody Mania can do an automatic calibration of the microphone delay for you. Therefor,
- Hold your microhpone to the speaker
- Click the calibration button and wait

This will measure the round-trip time from playing audio to analyzing microhpone input.

## Mic Amplification
Increase the amplification until your microphone accepts input from you in normal voice volume.
- TIP: This option should be as low as possible

## Mic Noise Suppression
Configure the noise suppression if your microphone is mistaken ambient noise for singing.

- TIP: This option should be as low as possible

This option will ignore input below the configured threshold volume.

## Assigning Mics to Players
- Microphones are assigned to players in song select before starting the song.
- A free microphone is assigned automatically to a selected player if possible.
    - TIP: Disable microphones that should not be used for singing in the settings
- You can change the microphone of a player manually by clicking the microhpone button.
- TIP: Use the same name for your player profile and Companion App to enable automatic matching.

# Speaker Configuration
Prefer wired speakers over wireless speakers.
- Bluetooth and other wireless speakers typically have a higher latency. This means there is a larger gap between playing the music in game and hearing it in your ears. This may shift the timing of your singing, and thus the timing of the note recording in game.
- One can try to increase the configured mic delay to counter the increased latency of wireless speakers. However, this is not optimal.

# Smartphone as Microphone
You can use an Android or iOS device as microphone on your PC.

## Companion App
The [Melody Mania Companion App](https://github.com/UltraStar-Deluxe/PlayCompanion/releases) for Android connects automatically to the main game. Therefor,
- Connect to the same WLAN as the main game
- Check the recording options of the main game. Your Companion App should be listed.
    - TIP: If your Companion App is not listed immediately then try to temporarily disable the firewall on the device that runs the main game. Do not forget to enable your firewall afterwards again!
- Click the recording button.
    - TIP: Recording is synchronized automatically with song playback.
- TIP: Use the same name for your player profile and Companion App to enable automatic matching.
- TIP: The Companion App can do more than just recording, see [here](/how-to-companion-app)

## Alternatives to the Companion App
### WO Mic
[WO Mic](https://wolicheng.com/womic/) allows you to use an Android or iOS device as microphone in Windows, Linux and MacOS.
Only one such connection is possible at a time.

- Install *WO Mic app* on your smartphone
- Install *Wo Mic virtual device* on your PC
- Install *WO Mic client* on your PC

For Melody Mania, Bluetooth connection is sufficient.

- In WO Mic app settings, select Bluetooth as "Transport"
- Start the WO Mic microphone recording
- Pair your smartphone with your PC (see Bluetooth settings of your operating system)
- Start the WO Mic client on your PC
    - Under `Connection > Connect...` select Bluetooth and the smartphone device that has been paired in the above step. Hit Connect.
- Finally, configure the WO Mic microphone device in Melody Mania.
    - A "Delay" around 300 ms has been found to work fine.

### Audio Jack Connection
Connecting the audio jack of the smartphone with the microphone input jack of the PC is another option.

This requires a male-male audio cable.

<img width="10%" src="https://images-na.ssl-images-amazon.com/images/I/51o5L9vOL3L._AC_SL1000_.jpg"></img>

Furthermore, you need to install an app that sends your mic input to the audio jack of your smartphone. The following apps have been found to work (of course, there might be further alternatives).

- Microphone by Gaz Davidson: [Google Play Store](https://play.google.com/store/apps/details?id=net.bitplane.android.microphone) | [F-Droid](https://f-droid.org/en/packages/net.bitplane.android.microphone/)
    - Very simple, does not require additional permissions, no ads
- Microphone by Wonder Grace: [Google Play Store](https://play.google.com/store/apps/details?id=com.grace.microphone)
    - More features and more modern UI, also wants telephone permissions, no ads

If your PC does not have a microphone input jack, then a USB-adapter might be an alternative.

<img width="10%" src="https://images-na.ssl-images-amazon.com/images/I/61nVIv4OqIL._AC_SX450_.jpg"></img>

### Other alternatives
See [wikiHow](https://www.wikihow.com/Use-Your-Phone-As-a-Mic) for further alternatives.

export default ({ children }) => (
    <MdxLayoutComponent>{children}</MdxLayoutComponent>
);
